<div id="courses_tutor" class="section-view space-y-6">
    <div class="flex justify-between items-center">
        <div>
            <h3 class="text-2xl font-black text-slate-800">Quản lý Lớp học</h3>
            <p class="text-slate-500 text-sm">Danh sách các lớp bạn đang phụ trách giảng dạy</p>
        </div>
        <div class="flex gap-3">
             <button class="px-4 py-2 rounded-xl bg-white border border-slate-200 text-slate-600 text-sm font-bold hover:bg-slate-50 transition shadow-sm">
                <i class="fa-solid fa-filter mr-2"></i>Bộ lọc
            </button>
            <button class="px-4 py-2 rounded-xl bg-blue-600 text-white text-sm font-bold hover:bg-blue-700 transition shadow-lg shadow-blue-500/30">
                <i class="fa-solid fa-plus mr-2"></i>Tạo lớp mới
            </button>
        </div>
    </div>

    <!-- Course List Container -->
    <div id="tutor-courses-list" class="space-y-6">
        <!-- JS will inject content here -->
         <div class="text-center py-12">
            <i class="fa-solid fa-circle-notch fa-spin text-3xl text-blue-500"></i>
            <p class="mt-3 text-slate-500">Đang tải dữ liệu lớp học...</p>
        </div>
    </div>
</div>

<!-- Upload Modal (Hidden) -->
<div id="upload-modal" class="hidden fixed inset-0 z-[60] flex items-center justify-center">
    <div class="absolute inset-0 bg-slate-900/30 backdrop-blur-sm transition-opacity" onclick="closeUploadModal()"></div>
    <div class="glass-panel w-full max-w-lg p-6 rounded-[28px] shadow-2xl relative z-10 bg-white transform transition-all scale-100">
        <div class="flex justify-between items-center mb-4">
            <h3 class="text-xl font-bold text-slate-800">Upload Tài liệu</h3>
            <button onclick="closeUploadModal()" class="w-8 h-8 rounded-full bg-slate-100 hover:bg-slate-200 flex items-center justify-center transition">
                <i class="fa-solid fa-xmark"></i>
            </button>
        </div>
        
        <input type="hidden" id="upload-course-id">
        
        <div class="border-2 border-dashed border-slate-300 rounded-2xl p-8 text-center hover:border-blue-500 hover:bg-blue-50 transition cursor-pointer mb-4" onclick="document.getElementById('file-input').click()">
            <i class="fa-solid fa-cloud-arrow-up text-4xl text-blue-400 mb-3"></i>
            <p class="font-bold text-slate-700">Kéo thả file vào đây hoặc nhấn để chọn</p>
            <p class="text-xs text-slate-400 mt-1">Hỗ trợ PDF, PPTX, DOCX, MP4 (Max 50MB)</p>
            <input type="file" id="file-input" class="hidden" multiple onchange="handleFileSelect(this)">
        </div>

        <div id="selected-files-preview" class="space-y-2 mb-6 max-h-40 overflow-y-auto custom-scroll">
            <!-- File previews -->
        </div>

        <div class="flex justify-end gap-3">
            <button onclick="closeUploadModal()" class="px-4 py-2 rounded-xl text-slate-500 font-bold hover:bg-slate-100 transition">Hủy</button>
            <button onclick="submitUpload()" class="px-6 py-2 rounded-xl bg-blue-600 text-white font-bold shadow-lg hover:bg-blue-700 transition">Upload ngay</button>
        </div>
    </div>
</div>

<!-- Attendance Modal -->
<div id="attendance-modal" class="hidden fixed inset-0 z-[60] flex items-center justify-center">
    <div class="absolute inset-0 bg-slate-900/30 backdrop-blur-sm transition-opacity" onclick="closeAttendanceModal()"></div>
    <div class="glass-panel w-full max-w-2xl p-6 rounded-[28px] shadow-2xl relative z-10 bg-white transform transition-all scale-100 max-h-[90vh] flex flex-col">
        <div class="flex justify-between items-center mb-4 flex-shrink-0">
            <div>
                <h3 class="text-xl font-bold text-slate-800">Điểm danh</h3>
                <p class="text-sm text-slate-500" id="attendance-course-name">Lớp học...</p>
            </div>
            <button onclick="closeAttendanceModal()" class="w-8 h-8 rounded-full bg-slate-100 hover:bg-slate-200 flex items-center justify-center transition">
                <i class="fa-solid fa-xmark"></i>
            </button>
        </div>
        
        <div class="flex justify-between items-center mb-4 flex-shrink-0">
            <p class="text-sm font-bold text-slate-600">Danh sách sinh viên (<span id="attendance-count">0</span>)</p>
            <button onclick="toggleAllAttendance()" class="text-xs font-bold text-blue-600 hover:underline">Chọn tất cả</button>
        </div>

        <div id="attendance-list" class="space-y-2 overflow-y-auto custom-scroll flex-1 pr-2">
            <!-- Student rows injected here -->
        </div>

        <div class="flex justify-end gap-3 mt-6 flex-shrink-0 pt-4 border-t border-slate-100">
            <button onclick="closeAttendanceModal()" class="px-4 py-2 rounded-xl text-slate-500 font-bold hover:bg-slate-100 transition">Hủy</button>
            <button onclick="submitAttendance()" class="px-6 py-2 rounded-xl bg-blue-600 text-white font-bold shadow-lg hover:bg-blue-700 transition">Lưu điểm danh</button>
        </div>
    </div>
</div>

<!-- Email Modal -->
<div id="email-modal" class="hidden fixed inset-0 z-[60] flex items-center justify-center">
    <div class="absolute inset-0 bg-slate-900/30 backdrop-blur-sm transition-opacity" onclick="closeEmailModal()"></div>
    <div class="glass-panel w-full max-w-lg p-6 rounded-[28px] shadow-2xl relative z-10 bg-white transform transition-all scale-100">
        <div class="flex justify-between items-center mb-6">
            <div>
                <h3 class="text-xl font-bold text-slate-800">Gửi thông báo</h3>
                <p class="text-sm text-slate-500" id="email-course-name">Đến lớp...</p>
            </div>
            <button onclick="closeEmailModal()" class="w-8 h-8 rounded-full bg-slate-100 hover:bg-slate-200 flex items-center justify-center transition">
                <i class="fa-solid fa-xmark"></i>
            </button>
        </div>
        
        <form id="email-form" onsubmit="submitEmail(event)" class="space-y-4">
            <div>
                <label class="block text-xs font-bold text-slate-500 uppercase mb-1">Tiêu đề</label>
                <input type="text" required placeholder="Nhập tiêu đề email..." class="w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 font-medium text-slate-700">
            </div>
            <div>
                <label class="block text-xs font-bold text-slate-500 uppercase mb-1">Nội dung</label>
                <textarea required rows="5" placeholder="Nhập nội dung thông báo..." class="w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/50 font-medium text-slate-700 resize-none"></textarea>
            </div>
            
            <div class="flex justify-end gap-3 pt-2">
                <button type="button" onclick="closeEmailModal()" class="px-4 py-2 rounded-xl text-slate-500 font-bold hover:bg-slate-100 transition">Hủy</button>
                <button type="submit" class="px-6 py-2 rounded-xl bg-blue-600 text-white font-bold shadow-lg hover:bg-blue-700 transition">
                    <i class="fa-solid fa-paper-plane mr-2"></i>Gửi ngay
                </button>
            </div>
        </form>
    </div>
</div>